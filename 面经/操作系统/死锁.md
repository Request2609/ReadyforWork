# 死锁的定义

在两个或多个进程中，每个进程都已持有某种资源，但又继续申请其它进程已持有的某种资源。此时每个进程都拥有其运行所需的一部分资源，但是又都不够，从而每个进程都不能向前推进，陷于阻塞状态。这种状态称死锁。

# 死锁的必要条件

**互斥条件：** 资源具有独占性，进程互斥使用资源。

**不剥夺条件：** 进程在释放资源前（即访问完）不能被其他进程剥夺。

**部分分配条件：** 进程所需资源逐步分配，需要时申请和分配，即每个进程都占有一些资源，同时又申请新的资源。

**环路条件：** 多个进程构成环路，环中每个进程已占用的资源被前一进程申请，而自己所需新资源又被环中后一进程所占用。

# 预防死锁的方法

1. **一次性分配法：**

    破坏部分分配条件。

    进程运行前将所需全部资源一次性分配给它，因此进程在运行过程中不再提出资源请求，从而避免出现阻塞或者死锁。

2. **有序资源分配法： **

    破坏环路条件，使得环路无法构成。

    系统中的每个资源分配有一个唯一序号且进程每次申请资源时只能申请序号更大的资源。如果进程已占有资源的序号最大为M，则下次只能申请序号大于M的资源，而不能再申请序号小于或等于M的资源。

    分配资源时检查资源序号是否符合递增规定：

    （1）若不符合则拒绝该申请，并撤销该进程；

    （2）若符合且资源可用则予以分配；

    （3）若符合但资源不可用则不分配，陷于阻塞；

3. **银行家算法：** TODO